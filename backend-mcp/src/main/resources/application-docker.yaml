server:
  port: ${DOCKER_MCP_HTTP_PORT:${SERVER_PORT:8080}}

spring:
  ai:
    mcp:
      server:
        enabled: true
        stdio: false
        protocol: STREAMABLE
        name: docker-runner-mcp
        version: 0.1.0
        type: SYNC
        annotation-scanner:
          enabled: false
        instructions: |
          Docker Runner MCP запускает Gradle-задачи внутри изолированного контейнера.
          Перед запуском передайте корректные workspaceId, tasks, а также при необходимости projectPath и переменные окружения.
        capabilities:
          tool: true
          resource: false
          prompt: false
          completion: false
      streamable-http:
        mcp-endpoint: /mcp
        keep-alive-interval: 30s

docker:
  runner:
    docker-binary: ${DOCKER_RUNNER_DOCKER_BINARY:docker}
    image: ${DOCKER_RUNNER_IMAGE:aiadvent/mcp-gradle-runner:latest}
    workspace-root: ${DOCKER_RUNNER_WORKSPACE_ROOT:/var/tmp/aiadvent/mcp-workspaces}
    gradle-cache-path: ${DOCKER_RUNNER_GRADLE_CACHE_PATH:/var/tmp/aiadvent/gradle-cache}
    timeout: ${DOCKER_RUNNER_TIMEOUT:PT15M}
    max-log-bytes: ${DOCKER_RUNNER_MAX_LOG_BYTES:524288}
    enable-network: ${DOCKER_RUNNER_ENABLE_NETWORK:false}
    default-args: ${DOCKER_RUNNER_DEFAULT_ARGS:}
    default-env:
      GRADLE_USER_HOME: ${DOCKER_RUNNER_GRADLE_USER_HOME:/gradle-cache}
    memory-limit-gb: ${DOCKER_RUNNER_MEMORY_LIMIT_GB:0}
    cpu-limit: ${DOCKER_RUNNER_CPU_LIMIT:0}
