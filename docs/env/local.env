# Local developer runtime for frontend + backend with local LLM/embeddings.
# Copy into `.env` when running locally or pass via `--env-file docs/env/local.env`.

# Core Spring profile & persistence
SPRING_PROFILES_ACTIVE=local
APP_DB_URL=jdbc:postgresql://localhost:5434/ai_advent
APP_DB_USERNAME=ai_advent
APP_DB_PASSWORD=ai_advent
POSTGRES_DB=ai_advent
POSTGRES_USER=ai_advent
POSTGRES_PASSWORD=ai_advent

# HTTP client budget (keep short to fail fast locally)
HTTP_CLIENT_CONNECT_TIMEOUT=PT30S
HTTP_CLIENT_READ_TIMEOUT=PT4M
HTTP_REACTIVE_CLIENT_CONNECT_TIMEOUT=PT30S
HTTP_REACTIVE_CLIENT_READ_TIMEOUT=PT4M
OPENAI_CLIENT_READ_TIMEOUT=PT4M
ZHIPU_CLIENT_READ_TIMEOUT=PT4M

# Local OpenAI-compatible gateway (e.g. Ollama/vLLM running on :11434)
OPENAI_BASE_URL=http://localhost:11434/v1
OPENAI_API_KEY=ollama-local
OPENAI_DEFAULT_MODEL=llama3.1:8b-instruct
OPENAI_TEMPERATURE=0.4
OPENAI_TOP_P=0.9
OPENAI_MAX_TOKENS=2048
OPENAI_TIMEOUT=PT2M

# Mirror Zhipu provider to the same local endpoint to avoid remote calls
ZHIPU_BASE_URL=${OPENAI_BASE_URL}
ZHIPU_COMPLETIONS_PATH=/v1/chat/completions
ZHIPU_API_KEY=${OPENAI_API_KEY}
ZHIPU_DEFAULT_MODEL=${OPENAI_DEFAULT_MODEL}
ZHIPU_TEMPERATURE=${OPENAI_TEMPERATURE}
ZHIPU_TOP_P=${OPENAI_TOP_P}
ZHIPU_MAX_TOKENS=${OPENAI_MAX_TOKENS}
ZHIPU_TIMEOUT=${OPENAI_TIMEOUT}

# Disable MCP clients that expect remote services
PERPLEXITY_MCP_ENABLED=false
FLOW_WORKER_ENABLED=false

# Local embeddings served by the same gateway (e.g. `ollama pull bge-m3`)
NOTES_EMBEDDING_MODEL=bge-m3
NOTES_EMBEDDING_DIMENSIONS=1024
GITHUB_RAG_EMBEDDING_MODEL=bge-m3
GITHUB_RAG_EMBEDDING_DIMENSIONS=1024
NOTES_LIQUIBASE_CONTEXTS=notes,notes-local
GITHUB_LIQUIBASE_CONTEXTS=github-rag,github-rag-local

# Caching: set Redis to local instance or Docker mapping
SPRING_DATA_REDIS_HOST=localhost
SPRING_DATA_REDIS_PORT=6379
REDIS_PORT=6379

# Frontend dev server proxy target
VITE_API_BASE_URL=/api
VITE_DEV_PROXY_TARGET=http://localhost:8080

# Disable Telegram integrations for FE-only workflows
TELEGRAM_BOT_ENABLED=false
TELEGRAM_STT_ENABLED=false

# Profile personalization helpers (dev token auth only)
PROFILE_DEV_ENABLED=true
PROFILE_BASIC_TOKEN=dev-profile-token
ENABLE_PROFILE_PROMPTS=true

# Notes/GitHub MCP DB creds (used only when running those services locally)
NOTES_MCP_DB_URL=jdbc:postgresql://localhost:5434/ai_advent
NOTES_MCP_DB_USER=ai_advent
NOTES_MCP_DB_PASSWORD=ai_advent
NOTES_SEARCH_TOP_K=5
NOTES_SEARCH_MIN_SCORE=0.55

# Optional GitHub placeholders (kept empty to avoid remote calls)
GITHUB_PAT=
