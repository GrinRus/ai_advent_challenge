# Архитектура frontend

Frontend построен на React + Vite и организован по компонентному принципу с фокусом на интерактивный чат.

## Структура проекта
- `frontend/src/app/` — композиция роутинга и глобальных провайдеров.
- `frontend/src/features/chat/` — компоненты и состояния чата, работающие с SSE потоком от backend.
- `frontend/src/shared/` — переиспользуемые UI-компоненты, стили и хелперы.
- `frontend/src/api/` — клиенты для REST/SSE, подключенные через fetch/axios (см. `apiClient`).

Файловая структура поддерживается через Vite aliases, указанные в `tsconfig.json` и `vite.config.ts`.

## Поток работы чата
1. Пользователь отправляет сообщение, которое попадает в состояние чата.
2. SSE-клиент подключается к `POST /api/llm/chat/stream` и получает токены в режиме реального времени.
3. UI отрисовывает входящий поток, поддерживает паузы, ошибки и повторные запросы.

## Конфигурация окружения
- Основные переменные описаны в `.env.example` (`VITE_API_BASE_URL`, таймауты, флаги).
- Dockerfile собирает production-бандл и обслуживает его через Nginx.
- Для локальной разработки используется `npm run dev` с проксированием `/api`.

## UI/UX принципы
- Минимальный набор базовых компонентов с понятной типографикой.
- Четкое разделение сообщений пользователя и модели.
- Отображение состояния загрузки и ошибок в потоке.

## Управление параметрами запроса
- Панель `Параметры sampling` отображает sliders/inputs для `temperature`, `topP`, `maxTokens`. При загрузке чата значения инициализируются дефолтами провайдера из `/api/llm/providers`.
- Пользователь может изменять параметры как ползунком, так и точным числовым вводом. Кнопка «Сбросить к дефолтам» возвращает конфигурацию к значениям провайдера и очищает overrides.
- Если поля не изменялись или были сброшены, фронтенд не отправляет опцию `options` в payload — backend использует конфиг по умолчанию.
- Активные параметры выводятся рядом с сообщениями ассистента в обоих режимах (`stream`/`structured`) в формате `Temp … · TopP … · Max …`, что упрощает диагностику последовательности запросов.

Диаграммы экранов и флоу размещайте в `docs/architecture/diagrams`.
